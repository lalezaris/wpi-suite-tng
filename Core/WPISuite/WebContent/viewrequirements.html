<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<meta name="Author" content="Sam Abradi, Tushar Narayan">
<title>WPI Suite RM Requirements Viewer</title>
</head>
<body>
	<h1>WPI Suite RM Requirements Viewer</h1>

	<script type="text/javascript">
		function setProject(){
			var projName = document.getElementById("loginproject").value;
			var xml = new XMLHttpRequest();
			xml.onreadystatechange = function() {
				if (xml.readyState == 4)//wait until response is available
				{
					document.getElementById("loginprojectspan").innerHTML = "HEY";
				}
			};
			xml.open('PUT', 'login', false);
			//xml.setRequestHeader('Content', projName);
			xml.send(projName);
			document.getElementById("loginprojectspan").innerHTML = "Setting Project";
		}
		
		function login() {
			//generate unencoded authentication header
			var basicAuth = "Basic ";
			var credentials = document.getElementById("loginusername").value
					+ ":" + document.getElementById("loginpassword").value;
			var authString = basicAuth + window.btoa(credentials);
			

			//create new XHR
			var xml = new XMLHttpRequest();

			//define behavior for when the response is recieved
			xml.onreadystatechange = function() {
				if (xml.readyState == 4)//wait until response is available
				{
					document.getElementById("loginresponsespan").innerHTML = xml.statusText;
					setProject();
				}
			};

			//setup reuqest to POST to login
			xml.open('POST', 'login', false);
			//set the request header
			xml.setRequestHeader('Authorization', authString);
			//send the request
			xml.send();
		}

		function getRequirements() {
			var xml = new XMLHttpRequest();
			xml.onreadystatechange = function() {
				if (xml.readyState == 4)//wait until response is available
				{
					document.getElementById("requirementspan").innerHTML = xml.statusText;
				}

			};

/* 			document.getElementById("requirementspan").innerHTML = action;
 */
			xml.open('GET', 'API/requirementsmanager/requirement', false);//test/requirementsmanager/requirement
			xml.send();
		}
	</script>
	<h4>Login:</h4>
	Username:<input type="text" id="loginusername"></input>
	<br>
	Password:<input type="password" id="loginpassword"></input>
	<br>
	Project:<input type="text" id="loginproject"></input>
	<br>
	<input type="button" value="Submit" onclick="login()">
	<span id="loginresponsespan"></span>
	<span id="loginprojectspan"></span>
	<br />
	<br />
	<br />
	<br />
	<input type="button" value="Get Requirements"
		onclick="getRequirements()">
	<br />
	<br />
	<br />
	<span id="requirementspan"></span>


</body>
</html>
